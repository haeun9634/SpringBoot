# Chapter 8. API & Swagger & Annotation (1)

# ğŸ“Â í•™ìŠµ ëª©í‘œ

---

1. ì´ë²ˆì—” Databaseì™€ ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ” APIì˜ ì˜ˆì‹œë¥¼ í†µí•´ ì „ì²´ì ì¸ ê³¼ì •ì„ ìˆ™ì§€í•œë‹¤.
2. Swaggerì˜ ì„¸íŒ…ì„ ìµíŒë‹¤.
3. ì–´ë…¸í…Œì´ì…˜ì„ í†µí•œ Validationì„ ìµíŒë‹¤.

# ğŸ“¸ ì ê¹ ! ìŠ¤í„°ë”” ì¸ì¦ìƒ·ì€ ì°ìœ¼ì…¨ë‚˜ìš”?ğŸ“¸

---

* ìŠ¤í„°ë”” ë¦¬ë”ê»˜ì„œ ëŒ€í‘œë¡œ ë§¤ ì£¼ì°¨ë§ˆë‹¤ í•œ ì¥ ë‚¨ê²¨ì£¼ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤!ğŸ™†ğŸ’—
 (ì‚¬ì§„ì„ ì €ì¥í•´ì„œ ì´ë¯¸ì§€ ì„ë² ë“œë¥¼ í•˜ì…”ë„ ì¢‹ê³ , ë³µì‚¬+ë¶™ì—¬ë„£ê¸° í•´ì„œ ë„£ì–´ì£¼ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤!)

[https://www.notion.so](https://www.notion.so)

# ğŸ“‘ 8ì£¼ì°¨ ì£¼ì œ

---

8ì£¼ì°¨ëŠ” 7ì£¼ì°¨ì— ë¹„í•˜ë©´ ì„¤ëª…ì´ ê¸¸ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ğŸ‰ğŸ‰

~~ìŠ¤í”„ë§ ìì²´ ì„¤ëª…ì€ ì§§ìœ¼ë‚˜ ê¹ƒí—ˆë¸Œ ì„¤ëª…ì´ ë“¤ê°€ì„œ ê¸¸ì–´ì§â€¦~~

ì‚¬ì‹¤ìƒ Springbootì˜ íë¦„ì€ 7ì£¼ì°¨ì—ì„œ ë§ì´ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.

8ì£¼ì°¨ëŠ” ì¢€ ë” êµ¬ì²´ì ì¸ ê³¼ì •ì„ í†µí•´ ì‚´í´ë³´ëŠ” ê·¸ëŸ° ëŠë‚Œì´ ì£¼ë¥˜ê°€ ë  ê²ƒì…ë‹ˆë‹¤.

ê±°ê¸°ì— Service, Controllerì—ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë„˜ê²¨ì¤€ ë°ì´í„°ì— ëŒ€í•œ ê²€ì¦ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šê³ ,

ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ í•˜ê²Œ í•´ì„œ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì§€í‚¤ë©´ì„œë„ âœ¨**ë” ì½”ë“œë¥¼ ë©‹ì§€ê²Œ ì§œëŠ” ë²•**âœ¨ì„ ë‹¤ë¤„ë´…ì‹œë‹¤.

# ğŸ”– 8ì£¼ì°¨ ë³¸ë¬¸

---

ì´ë²ˆì—ëŠ” ì•„ì£¼ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ (~~ë³µì¡í•œ APIëŠ” ì—¬ëŸ¬ë¶„ì´ ë¯¸ì…˜ìœ¼ë¡œ í•´ì•¼í•¨~~)

ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ëŠ”(íšŒì› ê°€ì…) APIë¥¼ ë§Œë“¤ë©´ì„œ Databaseì™€ì˜ ìƒí˜¸ì‘ìš©ê¹Œì§€ í¬í•¨ëœ ê³¼ì •ì„ ë´…ì‹œë‹¤.

íšŒì› ê°€ì…ì— í•„ìš”í•œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” 10ì£¼ì°¨ì— ì„¤ëª… ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.

![Untitled](Untitled.png)

ì´ í™”ë©´ì— í•´ë‹¹í•˜ëŠ” ê¸°ëŠ¥ì— ëŒ€í•œ APIë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

## ê¹ƒí—ˆë¸Œ ì´ìŠˆ & ë¸Œëœì¹˜ ë§Œë“¤ê¸°

---

ìš°ì„  ì´ê²ƒë„ **ê¸°ëŠ¥ì„ íŒŒëŠ” ê²ƒ**ì´ë‹ˆ **ê¹ƒí—ˆë¸Œì—ì„œ ì´ìŠˆë¥¼ ë§Œë“¤ê³  ë¸Œëœì¹˜ë¥¼ ë§Œë“œëŠ” ê²ƒ**ì„ í•´ë´…ì‹œë‹¤.

**ì´ê±¸ êµ³ì´ ì™œ í•˜ëŠëƒ, ë‚˜ì¤‘ì— 11ì£¼ì°¨ì— ë‚˜ì˜¬ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ ì“°ë ¤ë©´ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤!**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.25.09.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.25.09.png)

ì, ì—¬ê¸°ì„œ ë­ë¥¼ í•  ê²ƒì´ëƒ, **ì´ìŠˆë¥¼ ë§Œë“¤ ê²ƒ**ì…ë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.34.23.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.34.23.png)

ì¼ë‹¨ ì´ìŠˆë¥¼ ë§Œë“¤ê¸° ì „ì— **ë¼ë²¨**ë¶€í„° ë°”ê¾¸ë„ë¡ í•©ì‹œë‹¤.

![Untitled](Untitled%201.png)

ë¼ë²¨ì„ **ê¹ƒëª¨ì§€**ë¥¼ ì¨ì„œ ğŸŒ¼ì˜ˆì˜ê²ŒğŸŒ¼ í•´ë´…ì‹œë‹¤. (ì‹«ìœ¼ë©´ ì•ˆ í•´ë„ ë¨)

- [ì°¸ê³ ] **ê¹ƒëª¨ì§€(gitmoji)**ë€?
    
    [âš¡ï¸ Gitmoji ì‚¬ìš©ë²• ì •ë¦¬ (+ ê¹ƒëª¨ì§€ íˆ´ ì†Œê°œ)](https://inpa.tistory.com/entry/GIT-âš¡ï¸-Gitmoji-ì‚¬ìš©ë²•-Gitmoji-cli)
    

**: (ì½œë¡ )**ë¥¼ ì“°ë©´ ê¹ƒëª¨ì§€ ì„ íƒì´ ë‚˜ì˜¤ë‹ˆ ì˜ë¯¸ì— ë§ëŠ” ê¹ƒëª¨ì§€ë¥¼ ì¨ì„œ ë¼ë²¨ì„ ê¾¸ë°‰ì‹œë‹¤. (ì°¸ê³  ìë£Œ í™•ì¸!)

![Untitled](Untitled%202.png)

> bug â†’ **:bug: bug (= ğŸ› bug)**
documentation â†’ **:memo: docs (= ğŸ“ docs)**
enhancement â†’ **:sparkles: feature (= âœ¨ feature)**
> 

ì´ë ‡ê²Œ í•˜ê³  ìƒ‰ë„ ì—°í•œ ìƒ‰ìœ¼ë¡œ í•´ì„œ ê¾¸ëª„ìŠµë‹ˆë‹¤.

ì´ì œ í•˜ë‚˜ë§Œ ë” ì¶”ê°€í•˜ì£ ,

![Untitled](Untitled%203.png)

**REFACTOR**ì— ì‚¬ìš©ë  ë¼ë²¨ì…ë‹ˆë‹¤

**:recycle: refactor (= â™»ï¸ refactor)** ì´ë ‡ê²Œ í•´ì£¼ì„¸ìš©

![Untitled](Untitled%204.png)

ì´ì œ ì´ìŠˆë¥¼ íŒŒë´…ì‹œë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.36.46.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.36.46.png)

ì €ëŠ” ì´ìŠˆ ì œëª©ì— ê¹ƒëª¨ì§€ë¥¼ ì ê·¹ í™œìš©í•˜ëŠ” í¸ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³ ,
**ê¹ƒëª¨ì§€ë¥¼ ì“°ë“  ì•ˆì“°ë“  [FEAT] [REFACTOR] [FIX] ë“±ë“± ì–´ë–¤ ê²ƒì— ëŒ€í•œ ì´ìŠˆì¸ì§€ëŠ” ê¼­ ëª…ì‹œ**í•´ì£¼ì„¸ìš”!

ê·¸ë¦¬ê³  ìš°ì¸¡ì— ëˆ„êµ¬ì—ê²Œ í• ë‹¹ ë  ì—…ë¬´ì¸ì§€, ì–´ë–¤ ì¢…ë¥˜ì˜ ë¼ë²¨ì¸ì§€ ê³¨ë¼ì£¼ì„¸ìš”!

ì´ì œ ì´ìŠˆë¥¼ ìƒì„±í•´ë³¼ê²Œìš”.

![Untitled](Untitled%205.png)

ì´ì œ ì € ë™ê·¸ë¼ë¯¸(Create a branch)ë¥¼ í†µí•´ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”!

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.42.57.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.42.57.png)

ë¸Œëœì¹˜ ì´ë¦„ì€ ì—­ì‹œ í”„ë¡œì íŠ¸ì˜ ì»¨ë²¤ì…˜ë§ˆë‹¤ ë‹¤ ë‹¤ë¥´ì§€ë§Œ
í•œ ê°€ì§€ ë°©ë²•ìœ¼ë¡œì¨ **ì—…ë¬´ì¢…ë¥˜/ì´ìŠˆë²ˆí˜¸**ë¥¼ ì•Œë ¤ë“œë¦´ê²Œìš”.

ìœ„ì˜ ì—…ë¬´ëŠ” featureì´ê³  ì´ìŠˆ ë²ˆí˜¸ê°€ 3ë²ˆì´ë‹ˆ, **feature/#3** ì´ë ‡ê²Œ ë¸Œëœì¹˜ ì´ë¦„ì„ ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.29.53.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.29.53.png)

ì´ì œ ìœ„ ì‚¬ì§„ì˜ ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•´ì£¼ì„¸ìš”.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.43.55.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.43.55.png)

ì´ì œ ìƒˆë¡œìš´ ë¸Œëœì¹˜ì—ì„œ ì‘ì—…ì„ í•  ê±°ì—ìš”.

â—ì£¼ì˜í•  ì ì€, **ìƒˆ ë¸Œëœì¹˜ê°€ ë»—ì–´ë‚˜ê°ˆ ë¸Œëœì¹˜ì—ì„œ ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤ëŠ” ê²ƒ**ì…ë‹ˆë‹¤!

í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ë§ˆë‹¤ ë‹¤ ë‹¤ë¥´ê² ì§€ë§Œ,

ì˜ˆë¥¼ ë“¤ì–´ **main**ì— êµ¬í˜„ëœ ê¸°ëŠ¥ë“¤ì´ ëª¨ì¸ë‹¤ë©´ **ë°˜ë“œì‹œ mainì—ì„œ ìƒˆ ë¸Œëœì¹˜ë¥¼ íŒŒëŠ” ê²ƒ**ì´ê³ 

mainì€ ìµœì¢… ë°°í¬ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , **develop**ì— ê°œë°œ ì™„ë£Œê°€ ëœ ê¸°ëŠ¥ë“¤ì´ ëª¨ì¸ë‹¤ë©´, **developì—ì„œ ìƒˆ ë¸Œëœì¹˜ë¥¼ íŒŒëŠ” ê²ƒ**ì…ë‹ˆë‹¤.

ì´ë ‡ê²Œ í”„ë¡œì íŠ¸ë§ˆë‹¤ ë‹¤ë¥´ë‹ˆ ì°¸ê³ í•´ì£¼ì„¸ìš”.

ì €ëŠ” ê·¸ëƒ¥ mainì—ì„œ ë¸Œëœì¹˜ë¥¼ íŒŒë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë°, ìœ„ ì‚¬ì§„ì„ ë³´ë©´, í˜„ì¬ ì €ëŠ” week_8 ë¸Œëœì¹˜ì£ ? ~~ë„¤!~~

ì—¬ê¸°ì„œ ì € ëª…ë ¹ì–´ë¥¼ ë³µë¶™í•´ì„œ ë¸Œëœì¹˜ë¥¼ íŒŒë©´ ì•ˆë˜ê² ì£ ? ~~ë„¤!~~

main ë¸Œëœì¹˜ë¡œ ì´ë™ì„ í•´ì¤ì‹œë‹¤.

***ê¹ƒí—ˆë¸Œ ëª…ë ¹ì–´ëŠ” êµ¬ê¸€ë§ì„ í†µí•´ ìˆ™ì§€í•´ì£¼ì„¸ìš”!***

![Untitled](Untitled%206.png)

ì, ì´ì œ ë°”ë¡œ ê¹ƒí—ˆë¸Œì—ì„œ ë³µì‚¬í•œ ëª…ë ¹ì–´ë¥¼ ë„£ì–´ì„œ ë¸Œëœì¹˜ë¥¼ íŒ”ê¹Œìš”?

**ì•„ë‹ˆì£ ,** ë‚´ê°€ ì–´ë–¤ ë¸Œëœì¹˜ì—ì„œ ì‘ì—…ì„ í•˜ëŠ” ë™ì•ˆ mainì— ìƒˆë¡œ ë¨¸ì§€ê°€ ë˜ì—ˆì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ,
ë¨¼ì € git pull origin mainìœ¼ë¡œ main ë¸Œëœì¹˜ì˜ ë³€ê²½ ì‚¬í•­ì„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

ìœ„ì— ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ **ë¸Œëœì¹˜ë¥¼ íŒŒê¸° ì „ ë¸Œëœì¹˜ë¥¼ íŒŒê³ ì í•˜ëŠ” ê³³ì˜ ë³€ê²½ ì‚¬í•­ì„ ê°€ì ¸ì˜¨ í›„,
ìƒˆ ë¸Œëœì¹˜ë¥¼ íŒŒì•¼**í•©ë‹ˆë‹¤!

ì´ì œ APIë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤!

## API ë§Œë“¤ê¸° (íšŒì› ê°€ì… API)

---

7ì£¼ì°¨ì—ì„œ í–ˆë˜ ìˆœì„œëŒ€ë¡œ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ìƒì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ê³  ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.

**API URLì€ ì˜ˆì‹œì¼ ë¿, ë¯¸ì…˜ ë•ŒëŠ” ì—¬ëŸ¬ë¶„ë“¤ì´ 3ì£¼ì°¨ì—ì„œ ì„¤ê³„í•œ URLì„ ì‚¬ìš©í•˜ì…”ì•¼ í•©ë‹ˆë‹¤!**

1. **DTO ìƒì„±**
    
    ```java
    public class MemberRequestDTO {
    		
    		@Getter
        public static class JoinDto{
            String name;
            Integer gender;
            Integer birthYear;
            Integer birthMonth;
            Integer birthDay;
            String address;
            String specAddress;
            List<Long> preferCategory;
        }
    }
    ```
    
    ```java
    
    public class MemberResponseDTO {
    
        @Builder
        @Getter
        @NoArgsConstructor
        @AllArgsConstructor
        public static class JoinResultDTO{
            Long memberId;
            LocalDateTime createdAt;
        }
    }
    ```
    

1. **Converter ìƒì„±**
    
    ```java
    public class MemberConverter {
    
        public static MemberResponseDTO.JoinResultDTO toJoinResultDTO(Member member){
            return MemberResponseDTO.JoinResultDTO.builder()
                    .memberId(member.getId())
                    .createdAt(LocalDateTime.now())
                    .build();
        }
    }
    ```
    

1. **Controller ìƒì„±**
    
    ```java
    @RestController
    @RequiredArgsConstructor
    @RequestMapping("/members")
    public class MemberRestController {
    
        private final MemberCommandService memberCommandService;
    
        @PostMapping("/")
        public ApiResponse<MemberResponseDTO.JoinResultDTO> join(@RequestBody @Valid MemberRequestDTO.JoinDto request){
            return null;
        }
    }
    ```
    
2. **Service ìƒì„±**
    
    ![Untitled](Untitled%207.png)
    

1. **Repository ìƒì„±**
    
    ![Untitled](Untitled%208.png)
    
    Spring Data JPAë¥¼ ì‚¬ìš©í•  ê²ƒì´ê¸°ì— ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
    
    ```java
    public interface MemberRepository extends JpaRepository<Member, Long> {
    }
    ```
    

1. **Service ì™„ì„±? (No)**
    
    ```java
    @Service
    @RequiredArgsConstructor
    public class MemberCommandServiceImpl implements MemberCommandService{
        
        private final MemberRepository memberRepository;
        
        @Override
        public Member joinMember(MemberRequestDTO.JoinDto request) {
            
            return null;
        }
    }
    ```
    
    Member ê°ì²´ë¥¼ ë§Œë“œëŠ” ì‘ì—… (í´ë¼ì´ì–¸íŠ¸ê°€ ì¤€ DTO to Entity)ë¥¼ ì„œë¹„ìŠ¤ ë‹¨ì—ì„œ í• ê¹Œìš”?
    
    í”„ë¡œì íŠ¸ë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤.
    
    ì €ì˜ ê²½ìš° ì„œë¹„ìŠ¤ëŠ” ì˜¤ë¡œì§€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘ì„ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Memberë¥¼ ë§Œë“œëŠ” ì‘ì—…ì„ converterì—ì„œ í•˜ê² ìŠµë‹ˆë‹¤.
    
2. **Converterì—ì„œ ë©¤ë²„ ìƒì„±**
    
    ```java
    public class MemberConverter {
    
        public static MemberResponseDTO.JoinResultDTO toJoinResultDTO(Member member){
            return MemberResponseDTO.JoinResultDTO.builder()
                    .memberId(member.getId())
                    .createdAt(LocalDateTime.now())
                    .build();
        }
    
        public static Member toMember(MemberRequestDTO.JoinDto request){
    
            Gender gender = null;
    
            switch (request.getGender()){
                case 1:
                    gender = Gender.MALE;
                    break;
                case 2:
                    gender = Gender.FEMALE;
                    break;
                case 3:
                    gender = Gender.NONE;
                    break;
            }
    
            return Member.builder()
                    .address(request.getAddress())
                    .specAddress(request.getSpecAddress())
                    .gender(gender)
                    .name(request.getName())
                    .memberPreferList(new ArrayList<>())
                    .build();
        }
    }
    ```
    
    ***ì €ëŠ” ì—¬ê¸°ì„œ, ë©¤ë²„ ì—”í‹°í‹°ì— ë‚˜ì´ë¥¼ ë„£ì§€ ì•ŠìŒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤ ğŸ™‚***
    
    ê·¸ëƒ¥.. ì§„í–‰ í•˜ê² ìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë“¤ì€ ì›í•˜ì‹œë©´ ì—”í‹°í‹°ì— ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤!
    
    ```java
    .memberPreferList(new ArrayList<>())
    ```
    
    ê·¸ë¦¬ê³  ë¦¬ìŠ¤íŠ¸ëŠ” ***new ArrayList<>()  â†*** ìš”ë ‡ê²Œ ****ì´ˆê¸°í™”ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤!
    
    ![Untitled](Untitled%209.png)
    
    ê·¸ë¦¬ê³  ì›ë˜ ì´ë©”ì¼ì„ ì†Œì…œ ë¡œê·¸ì¸ì—ì„œ ì²˜ë¦¬ í•œ í›„, ë‚˜ë¨¸ì§€ ì •ë³´ë¥¼ ê¸°ì… ë°›ëŠ” ê²ƒì´ ë§ëŠ” ìˆœì„œì´ë‚˜, **ì†Œì…œ ë¡œê·¸ì¸ ì—†ì´ í•˜ëŠ” ì¤‘**ì´ë¼ **ì´ë©”ì¼ì€ nullableë¡œ ë°”ê¾¸ê³  ì§„í–‰**í•˜ê² ìŠµë‹ˆë‹¤.
    
    application.ymlì—ì„œ 
    
    createë¡œ í…Œì´ë¸”ì„ ë‹¤ì‹œ ë§Œë“¤ê³  ì§„í–‰í•´ì£¼ì„¸ìš”!
    
    ![Untitled](Untitled%2010.png)
    
    ### ğŸ¤” ìœ ì € ì„ í˜¸ ìŒì‹ ì¹´í…Œê³ ë¦¬ëŠ”?
    
    ì´ëŸ° ê²½ìš° ë”°ë¡œ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•˜ë‹ˆ ìš°ì„  ì„œë¹„ìŠ¤ë¥¼ ì´ì–´ì„œ ì‘ì„±ì„ í•´ë´…ì‹œë‹¤.
    
3. **Service ì¤‘ê°„ ì™„ì„±**
    
    ```java
    @Service
    @RequiredArgsConstructor
    public class MemberCommandServiceImpl implements MemberCommandService{
    
        private final MemberRepository memberRepository;
    
        @Override
        public Member joinMember(MemberRequestDTO.JoinDto request) {
    
            Member newMember = MemberConverter.toMember(request);
            
            return null;
        }
    }
    ```
    
    ì, ì´ì œ ìœ ì €ê°€ ì„ í˜¸í•˜ëŠ” ì¹´í…Œê³ ë¦¬ë¥¼ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
    
    ì œê°€ **RequestDTO**ì—ì„œ **List<Long>**ìœ¼ë¡œ ì„ í˜¸ ì¹´í…Œê³ ë¦¬ë¥¼ ë°›ì•˜ì–ì•„ìš”?
    
    ```java
    @Getter
    public static classJoinDto{
        String name;
        Integer gender;
        Integer birthYear;
        Integer birthMonth;
        Integer birthDay;
        String address;
        String specAddress;
    		List<Long> preferCategory;
    }
    ```
    
    ì´ê²ƒì€ ì‚¬ì‹¤ 
    
    <aside>
    ğŸ¤— ì•„ë˜ í™”ë©´ì—ì„œ **ìš°ì¸¡ í™”ë©´ ë Œë”ë§ ì‹œ ìŒì‹ ì¹´í…Œê³ ë¦¬ë¥¼ ì¡°íšŒí•˜ëŠ” APIë¥¼ í˜¸ì¶œí•˜ê³ ,
    ê·¸ APIì˜ ê²°ê³¼ì—ì„œ ìŒì‹ ì¹´í…Œê³ ë¦¬ì˜ idê°’ì„ í”„ë¡ íŠ¸ì—”ë“œê°€ ë„˜ê²¨ì¤€ë‹¤ëŠ” ê²ƒì„ ì „ì œë¡œ í•œ ê²ƒ**ì…ë‹ˆë‹¤!
    
    </aside>
    
    ![Untitled](Untitled%2011.png)
    
    ë”°ë¼ì„œ DBì—ì„œ ì¼ë‹¨ ì € ì¹´í…Œê³ ë¦¬ë“¤ì„ ë§Œë“¤ì–´ë‘¡ì‹œë‹¤.
    
    ![Untitled](Untitled%2012.png)
    
4. **ìŒì‹ ì¹´í…Œê³ ë¦¬ Repository ìƒì„±**
    
    ```java
    public interface FoodCategoryRepository extends JpaRepository<FoodCategory, Long> {
    }
    ```
    
5. **Service ì´ì–´ì„œ ì‘ì„±**
    
    ```java
    @Service
    @RequiredArgsConstructor
    public class MemberCommandServiceImpl implements MemberCommandService{
    
        private final MemberRepository memberRepository;
    
        private final FoodCategoryRepository foodCategoryRepository;
    
        @Override
        @Transactional
        public Member joinMember(MemberRequestDTO.JoinDto request) {
    
            Member newMember = MemberConverter.toMember(request);
            List<FoodCategory> foodCategoryList = request.getPreferCategory().stream()
                    .map(category -> {
                        return foodCategoryRepository.findById(category).orElseThrow(() -> new FoodCategoryHandler(ErrorStatus.FOOD_CATEGORY_NOT_FOUND));
                    }).collect(Collectors.toList());
    
            List<MemberPrefer> memberPreferList = MemberPreferConverter.toMemberPreferList(foodCategoryList);
    
            memberPreferList.forEach(memberPrefer -> {memberPrefer.setMember(newMember);});
    
            return memberRepository.save(newMember);
        }
    }
    ```
    
    ì—¬ê¸°ì„œ streamì„ ì‚¬ìš©í–ˆëŠ”ë°ìš”, ì €ëŠ” forë¬¸ ë³´ë‹¤ëŠ” streamì„ ì‚¬ìš© í•  ê²ƒì„ **ê°•ë ¥íˆ ê¶Œê³ í•©ë‹ˆë‹¤.**
    
    **streamì„ ì²˜ìŒ ë³´ì‹ ë‹¤ë©´ êµ¬ê¸€ë§ì„ í†µí•´ streamì„ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ìˆ™ì§€í•´ì£¼ì„¸ìš”.**
    
    ê·¸ë¦¬ê³  ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ ë­ê°€ ë³´ì´ë‚˜ìš”?
    
    ```java
    () -> new FoodCategoryHandler(ErrorStatus.FOOD_CATEGORY_NOT_FOUND)
    ```
    
    ë„¤, **FoodCategoryHandler**ê°€ ì¶”ê°€ê°€ ë˜ì—ˆì£ ?
    
    ì—¬ëŸ¬ë¶„ë“¤ì´ **ì§ì ‘** ì¶”ê°€ë¥¼ í•˜ê³  ë”°ë¼ì™€ ì£¼ì„¸ìš”. (ErrorStatusì˜ FOOD_CATEGORY_NOT_FOUNDë„ ì¶”ê°€í•´ì£¼ì„¸ìš”!)
    
    ì´ì œ FoodCategoryì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì–»ì—ˆìœ¼ë‹ˆ ì´ë¥¼ ì´ìš©í•´ MemberPrefer ì—”í‹°í‹°ë¥¼ ë§Œë“¤ì–´ ì¤ì‹œë‹¤.
    
    ì—­ì‹œ converterì—ì„œ í•˜ê² ì£ ?
    
    ```java
    public class MemberPreferConverter {
    
        public static List<MemberPrefer> toMemberPreferList(List<FoodCategory> foodCategoryList){
    
            return foodCategoryList.stream()
                    .map(foodCategory ->
                            MemberPrefer.builder()
                                    .foodCategory(foodCategory)
                                    .build()
                    ).collect(Collectors.toList());
        }
    }
    
    ```
    
    ì–‘ë°©í–¥ ì—°ê´€ ê´€ê³„ ì„¤ì •ì€ converter ë³´ë‹¤ëŠ” serviceì—ì„œ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤!
    
    ë‹¨ë°©í–¥ì€ ì»¨ë²„í„°ì—ì„œ ì„¤ì •ì„ í•´ë„ ê´œì°®ìŠµë‹ˆë‹¤.
    
    ë”°ë¼ì„œ MemberPrefer ìƒì„± ì‹œ memberë¥¼ ë„£ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
    
6. **Service ì™„ì„±**
    
    ì´ì œ ì„œë¹„ìŠ¤ì—ì„œ ë­˜ í•´ì•¼ í• ê¹Œìš”?
    
    ì—°ê´€ ê´€ê³„ë¥¼ ì„¤ì •í•˜ê³ , ì–‘ë°©í–¥ ë§¤í•‘ì´ ëœ ê²½ìš° ì—°ê´€ ê´€ê³„ í¸ì˜ ë§¤ì„œë“œë¥¼ ì´ìš©í•´ ì–‘ë°©í–¥ ë§¤í•‘ì„ í•´ì¤ë‹ˆë‹¤.
    
    ì°¸ê³ ë¡œ, ì œê°€ ì‚¬ìš©í•˜ëŠ” ì—°ê´€ ê´€ê³„ í¸ì˜ ë§¤ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ì€ ëª¨ì–‘ì„ ê°€ì§‘ë‹ˆë‹¤.
    
    ```java
    @Entity
    @Getter
    @Builder
    @NoArgsConstructor(access = AccessLevel.PROTECTED)
    @AllArgsConstructor
    public class MemberPrefer extends BaseEntity {
    
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;
    
        @ManyToOne(fetch = FetchType.LAZY)
        @JoinColumn(name = "member_id")
        private Member member;
    
        @ManyToOne(fetch = FetchType.LAZY)
        @JoinColumn(name = "category_id")
        private FoodCategory foodCategory;
    
        public void setMember(Member member){
            if(this.member != null)
                member.getMemberPreferList().remove(this);
            this.member = member;
            member.getMemberPreferList().add(this);
        }
        
        public void setFoodCategory(FoodCategory foodCategory){
            this.foodCategory = foodCategory;
        }
    }
    ```
    
    **ì´ì œ ì™„ì„±ëœ serviceì˜ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.**
    
    ```java
    @Service
    @RequiredArgsConstructor
    public class MemberCommandServiceImpl implements MemberCommandService{
    
        private final MemberRepository memberRepository;
    
        private final FoodCategoryRepository foodCategoryRepository;
    
        @Override
        @Transactional
        public Member joinMember(MemberRequestDTO.JoinDto request) {
    
            Member newMember = MemberConverter.toMember(request);
            List<FoodCategory> foodCategoryList = request.getPreferCategory().stream()
                    .map(category -> {
                        return foodCategoryRepository.findById(category).orElseThrow(() -> new FoodCategoryHandler(ErrorStatus.FOOD_CATEGORY_NOT_FOUND));
                    }).collect(Collectors.toList());
    
            List<MemberPrefer> memberPreferList = MemberPreferConverter.toMemberPreferList(foodCategoryList);
    
            memberPreferList.forEach(memberPrefer -> {memberPrefer.setMember(newMember);});
    
            return memberRepository.save(newMember);
        }
    }
    ```
    
    ***@Transactionalì„ í†µí•´ íŠ¸ëœì­ì…˜ì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.***
    
    ì´ ì–´ë…¸í…Œì´ì…˜ì´ ë¬´ì—‡ì¸ì§€, ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ê¶ê¸ˆí•˜ë‹¤ë©´ êµ¬ê¸€ë§ì„ í•´ì„œ ì°¾ì•„ë³´ì„¸ìš”!
    
7. **controller ì™„ì„±**
    
    ```java
    @RestController
    @RequiredArgsConstructor
    @RequestMapping("/members")
    public class MemberRestController {
    
        private final MemberCommandService memberCommandService;
    
        @PostMapping("/")
        public ApiResponse<MemberResponseDTO.JoinResultDTO> join(@RequestBody @Valid MemberRequestDTO.JoinDto request){
            Member member = memberCommandService.joinMember(request);
            return ApiResponse.onSuccess(MemberConverter.toJoinResultDTO(member));
        }
    }
    ```
    
    ***@ValidëŠ” ë­ì§€? â† ì´ê±´ ë’¤ì—ì„œ ë‚˜ì˜µë‹ˆë‹¤..***
    
    ### ğŸ¤” ê·¼ë° ì´ì œ í…ŒìŠ¤íŠ¸â€¦ ì–´ë–»ê²Œ í•˜ì§€?
    
    POST ìš”ì²­ì´ê¸°ì— ëƒ…ë‹¤ urlë§Œ ì…ë ¥í•œë‹¤ê³  í…ŒìŠ¤íŠ¸ê°€ ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤â€¦
    
    ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ í• ê¹Œìš”? POSTMANì´ë¼ëŠ” íˆ´ì´ ìœ ëª…í•˜ì£ .
    
    ê·¸ëŸ¬ë‚˜ ìš°ë¦° Swaggerë¼ëŠ” ë§¤ìš° í¸ë¦¬í•˜ê³  ì¢‹ì€ íˆ´ì„ ì‚¬ìš© í•  ê²ƒì…ë‹ˆë‹¤.
    
    ~~ë¬¼ë¡ â€¦ ì½”ë”©ì„ ë” í•´ì•¼í•˜ì§€ë§Œâ€¦~~
    

## Swagger ì„¸íŒ…

---

ìš°ì„  ìŠ¤ì›¨ê±°ë¥¼ ì“°ë ¤ë©´ ì¶”ê°€ì ì¸ ì˜ì¡´ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-11 á„‹á…©á„’á…® 8.43.03.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-11_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.43.03.png)

```
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.3.0'
```

ì´í›„ config íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”

**í•´ë‹¹ íŒ¨í‚¤ì§€ì—ëŠ” ì¶”í›„ S3 ê´€ë ¨ Configë„ ë“¤ì–´ê°‘ë‹ˆë‹¤!**

![Untitled](Untitled%2013.png)

```java
@Configuration
public class SwaggerConfig {

    @Bean
    public OpenAPI UMCstudyAPI() {
        Info info = new Info()
                .title("UMC Server WorkBook API")
                .description("UMC Server WorkBook API ëª…ì„¸ì„œ")
                .version("1.0.0");

        String jwtSchemeName = "JWT TOKEN";
        // API ìš”ì²­í—¤ë”ì— ì¸ì¦ì •ë³´ í¬í•¨
        SecurityRequirement securityRequirement = new SecurityRequirement().addList(jwtSchemeName);
        // SecuritySchemes ë“±ë¡
        Components components = new Components()
                .addSecuritySchemes(jwtSchemeName, new SecurityScheme()
                        .name(jwtSchemeName)
                        .type(SecurityScheme.Type.HTTP) // HTTP ë°©ì‹
                        .scheme("bearer")
                        .bearerFormat("JWT"));

        return new OpenAPI()
                .addServersItem(new Server().url("/"))
                .info(info)
                .addSecurityItem(securityRequirement)
                .components(components);
    }
}
```

Swagger ì„¸íŒ…ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì—­ì‹œ êµ¬ê¸€ë§ì„ í•´ì„œ ì°¾ì•„ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.

ì´ì œ  [http://localhost:8080/swagger-ui/index.html#/](http://localhost:8080/swagger-ui/index.html#/) ë¡œ ì ‘ì†ì„ í•´ë´…ì‹œë‹¤!

ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë³´ì´ê²Œ ë©ë‹ˆë‹¤.

![Untitled](Untitled%2014.png)

ì´ì œ ë°©ê¸ˆ ë§Œë“  APIë¥¼ í…ŒìŠ¤íŠ¸ í•´ë´…ì‹œë‹¤.

ì•„ë˜ì™€ ê°™ì´ ì‘ë‹µì´ ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![Untitled](Untitled%2015.png)

![Untitled](Untitled%2016.png)

![Untitled](Untitled%2017.png)

### ğŸ˜± ê·¸ëŸ°ë°, statusê°€ nullì´ë„¤ìš”, ë¶„ëª… default ì„¤ì •ì„ í–ˆëŠ”ë°..

ì´ê²ƒì€ JPAê°€ saveë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ í•  ë•Œ, nullì¸ ê°’ì— ëŒ€í•´ ê·¸ëƒ¥ nullì„ insert í•´ë²„ë ¤ì„œ ìƒê¸°ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

ì´ë¥¼ ë§‰ê¸° ìœ„í•´ Member Entityë¥¼ ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”.

```java
@Entity
@Getter
**@DynamicUpdate
@DynamicInsert**
@Builder
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@AllArgsConstructor
public class Member extends BaseEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, length = 20)
    private String name;

    @Column(nullable = false, length = 40)
    private String address;

    @Column(nullable = false, length = 40)
    private String specAddress;

    @Enumerated(EnumType.STRING)
    @Column(columnDefinition = "VARCHAR(10)")
    private Gender gender;

    @Enumerated(EnumType.STRING)
    private SocialType socialType;

    @Enumerated(EnumType.STRING)
    @Column(columnDefinition = "VARCHAR(15) DEFAULT 'ACTIVE'")
    private MemberStatus status;

    private LocalDate inactiveDate;

//    @Column(nullable = false, length = 50)
    private String email;

    @ColumnDefault("0")
    private Integer point;

    @OneToMany(mappedBy = "member", cascade = CascadeType.ALL)
    private List<MemberAgree> memberAgreeList = new ArrayList<>();

    @OneToMany(mappedBy = "member", cascade = CascadeType.ALL)
    private List<MemberPrefer> memberPreferList = new ArrayList<>();

    @OneToMany(mappedBy = "member", cascade = CascadeType.ALL)
    private List<Review> reviewList = new ArrayList<>();

    @OneToMany(mappedBy = "member", cascade = CascadeType.ALL)
    private List<MemberMission> memberMissionList = new ArrayList<>();
}
```

**@DynamicUpdate
@DynamicInsert**

ì´ ë‘ ê°œëŠ” insertì™€ update ì‹œ null ì¸ ê²½ìš°ëŠ” ê·¸ëƒ¥ ì¿¼ë¦¬ë¥¼ ë³´ë‚´ì§€ ì•Šë„ë¡ í•´ì¤ë‹ˆë‹¤.

ê·¸ë¦¬ê³  

@ColumnDefault("0")
private Integer point;

í¬ì¸íŠ¸ë„ ì›ë˜ ë””í´íŠ¸ê°€ 0ì´ì–´ì•¼ í•˜ëŠ”ë° ê¹œë¹¡í•´ì„œ ì—¬ê¸°ì„œ ë„£ì—ˆìŠµë‹ˆë‹¤ ğŸ˜‡

ì´ì œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´…ì‹œë‹¤.

![Untitled](Untitled%2018.png)

![Untitled](Untitled%2019.png)

ì´ì œ Default ê°’ë„ ì˜ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

## *fin*. ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•œ validation

---

service í•¨ìˆ˜ë¥¼ ë³´ë©´ ì–´ë–»ê²Œ ë˜ì–´ìˆë‚˜ìš”?

![Untitled](Untitled%2020.png)

ì„œë¹„ìŠ¤ ë‹¨ì—ì„œ validationì„ í•˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ @ì„ ì´ìš©í•´ ë” ì¢‹ì€ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

![Untitled](Untitled%2021.png)

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”

ì´ì œ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ì–´ì„œ categoryê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ìš°ì„  build.gradleì— ìƒˆë¡œìš´ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-11 á„‹á…©á„’á…® 8.44.11.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-11_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.44.11.png)

```
implementation 'org.springframework.boot:spring-boot-starter-validation'
```

![Untitled](Untitled%2022.png)

ExistCategories

```java
@Documented
@Constraint(validatedBy = CategoriesExistValidator.class)
@Target( { ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER })
@Retention(RetentionPolicy.RUNTIME)
public @interface ExistCategories {

    String message() default "í•´ë‹¹í•˜ëŠ” ì¹´í…Œê³ ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}
```

<aside>
ğŸŒŸ **@Documented** - ****ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì‚¬ìš©ì ì •ì˜ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ ë•Œ ë¶™ì…ë‹ˆë‹¤.

**@Target** - ****ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì–´ë…¸í…Œì´ì…˜ì˜ ì ìš© ë²”ìœ„ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ê° íŒŒë¼ë¯¸í„°ì˜ ìì„¸í•œ ì—­í• ì€ êµ¬ê¸€ë§ì„ í•´ì„œ ì°¾ì•„ë³´ì„¸ìš©.

**@Retention** - ****ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì–´ë…¸í…Œì´ì…˜ì˜ ìƒëª… ì£¼ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ìœ„ì˜ ì½”ë“œëŠ” RUNTIMEì´ê¸°ì— ì‹¤í–‰ í•˜ëŠ” ë™ì•ˆì—ë§Œ ìœ íš¨í•˜ê²Œ ë©ë‹ˆë‹¤.

</aside>

ë§ˆì§€ë§‰ìœ¼ë¡œ,

**@Constraint** ì´ ì–´ë…¸í…Œì´ì…˜ì€ 

![Untitled](Untitled%2023.png)

ì‚¬ì§„ì„ ë³´ë©´ ì•Œê² ì§€ë§Œ, javaì—ì„œ ì œê³µí•˜ëŠ” ì‚¬ìš©ìê°€ validationì„ ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.

**@Constraint**ì˜ ****íŒŒë¼ë¯¸í„°ë¡œ validatedByê°€ ìˆê³  CategoriesExistValidator.classë¥¼ ì§€ì •í•˜ê³  ìˆì£ .

ì´ë¡œì¨ CategoriesExistValidatorë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í†µí•´ @ExistCategoriesê°€ ë¶™ì€ ëŒ€ìƒì„ ê²€ì¦í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ CategoriesExistValidator ë‚´ë¶€ë¥¼ ë´ì•¼ê² ì£ ?

![Untitled](Untitled%2024.png)

ìš°ì„  ConstraintValidator ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ êµ¬ì²´í™” í´ë˜ìŠ¤ë¡œì„œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

ì´ë•Œ, ExistCategories ì–´ë…¸í…Œì´ì…˜ì— ëŒ€í•œ ë¡œì§ì„ ë‹´ì„ ê²ƒì´ë©° ê²€ì¦ ëŒ€ìƒì´ List<Long>ì„ì„ ëª…ì‹œí•˜ì£ .

ì•„ë˜ ì‚¬ì§„ì„ ë´…ì‹œë‹¤.

![Untitled](Untitled%2025.png)

ì´ë ‡ê²Œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸°ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ë¹¨ê°„ì¤„ì´ ìƒê¹ë‹ˆë‹¤.

ì´ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë ¤ë©´ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼í•˜ëŠ”ë° ê·¸ê²Œ ì—†ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

ìœ„ ì‚¬ì§„ì²˜ëŸ¼ ë¹¨ê°„ì¤„ì´ ìƒê¸°ëŠ” ê³³ ì ë‹¹í•œ ê³³ì— ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì˜¬ë¦¬ë©´ ì•„ë˜ì—

implement methodsë¼ê³  ë³´ì¼ ê²ƒì…ë‹ˆë‹¤. (ë‹¨ì¶•í‚¤ë„ ìˆìœ¼ë‚˜ ìœˆë„ìš°ì™€ ë§¥ì´ ë‹¬ë¼ì„œâ€¦..)

ì´ì œ ì €ê±¸ í´ë¦­í•˜ë©´ 

![Untitled](Untitled%2026.png)

ì´ë ‡ê²Œ ì–´ë–¤ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•  ê²ƒì¸ì§€ ë¬¼ì–´ë³´ëŠ”ë°, ê·¸ëƒ¥ ì „ë¶€ ë‹¤ ì„ íƒ í›„ í™•ì¸ì„ í•´ì£¼ì„¸ìš”.

![Untitled](Untitled%2027.png)

ê·¸ëŸ¬ë©´ ìœ„ì™€ ê°™ì´ ì„¸íŒ…ì´ ë˜ëŠ”ë° ìš°ë¦¬ëŠ” isValid ë©”ì†Œë“œë§Œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” í˜•íƒœë¡œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¹!

```java
@Component
@RequiredArgsConstructor
public class CategoriesExistValidator implements ConstraintValidator<ExistCategories, List<Long>> {

    private final FoodCategoryRepository foodCategoryRepository;

    @Override
    public void initialize(ExistCategories constraintAnnotation) {
        ConstraintValidator.super.initialize(constraintAnnotation);
    }

    @Override
    public boolean isValid(List<Long> values, ConstraintValidatorContext context) {
        boolean isValid = values.stream()
                .allMatch(value -> foodCategoryRepository.existsById(value));

        if (!isValid) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate(ErrorStatus.FOOD_CATEGORY_NOT_FOUND.toString()).addConstraintViolation();
        }

        return isValid;

    }
}
```

ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ isValidí•¨ìˆ˜ì—ì„œ ê²€ì¦ ëŒ€ìƒì¸ List<Long> ì˜ ê°’ì„ ê°€ì§„ ì¹´í…Œê³ ë¦¬ê°€ ëª¨ë‘ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” ì§€ë¥¼ íŒë‹¨í•˜ê³  ì—†ì„ ê²½ìš° falseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ì œ ì¼ë‹¨ ìŠ¤ì›¨ê±°ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì£ .

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.15.10.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.15.10.png)

ìš°ì„  Http statusë¡œ 400ì´ ì™”ê³ , errorì„ì—ë„ resultì— ê°’ì´ ë“¤ì–´ê°€ ìˆìŠµë‹ˆë‹¤.

***ì´ ë•Œ, request body ì¤‘ ì–´ë””ë¥¼ ì˜ëª» í–ˆëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ê³  ìˆìŠµë‹ˆë‹¤.***

ì‚¬ì‹¤ ìœ„ì˜ ë°©ì‹ì€ í”„ë¡ íŠ¸ ê°œë°œìë¥¼ ë°°ë ¤í•´ì„œ ì‘ë‹µì„ ê²°ì • í•œ ê²ƒì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ ìœ„ì˜ ì‘ë‹µì´ ì˜¤ê²Œ ë˜ì—ˆëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.

ìš°ì„ ,

![Untitled](Untitled%2028.png)

ì´ `*ConstraintValidator`* ìš” ì¹œêµ¬ëŠ” isValid ë©”ì†Œë“œì˜ ë°˜í™˜ ê°’ì„ í™•ì¸í•˜ì—¬ ê²€ì¦ì´ ë˜ì—ˆëŠ”ì§€ ì‹¤íŒ¨í–ˆëŠ” ì§€ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤.

ë§Œì•½ isValidì˜ ë¦¬í„´ ê°’ì´ falseë©´ `ConstraintViolationException` ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤.

ê·¸ëŸ°ë° ì´ ë•Œ, DTOë¥¼ ê°€ë³´ë©´

![Untitled](Untitled%2029.png)

@ExistCategories ì–´ë…¸í…Œì´ì…˜ì´ Request Bodyë¡œ ë°›ì•„ ì˜¬ Dtoì˜ í•„ë“œì— ë¶™ì–´ìˆìœ¼ë¯€ë¡œ

![Untitled](Untitled%2030.png)

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ RequestBodyë¥¼ ë°›ì•„ì˜¤ëŠ” ê³¼ì •ì—ì„œ @ExistCategories ê°€ ë¶™ì–´ìˆëŠ” DTOë¡œ ì¸í•´

![Untitled](Untitled%2031.png)

ìœ„ì˜ ì½”ë“œê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.

ì´ì œ isValid ë©”ì†Œë“œì—ì„œ falseë¥¼ ë¦¬í„´í•˜ë©´ `ConstraintViolationException` ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ë°,

![Untitled](Untitled%2032.png)

@Valid ì–´ë…¸í…Œì´ì…˜ì´ ì¡´ì¬í•˜ë¯€ë¡œ @ExistCategoriesì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ê°€ ë°”ë¡œ ì „ë‹¬ì´ ë˜ì§€ ì•Šê³ , 

@Valid ì–´ë…¸í…Œì´ì…˜ì´ **MethodArgumentNotValidExceptionë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.**

ë”°ë¼ì„œ ìµœì¢…ì ìœ¼ë¡œ 

![Untitled](Untitled%2033.png)

adviceì—ì„œ **MethodArgumentNotValidExceptionë¥¼ ê°ì§€í•˜ê²Œ ë©ë‹ˆë‹¤.**

ì§€ê¸ˆê¹Œì§€ ì´ ê¸°ë‚˜ê¸´ ì—¬ì •ì„ ë”°ë¼ì˜¤ì‹œë‹¤ ë³´ë©´

**~~ìê²°(wkruf)â€¦..??~~**

ì´ ìƒê°ì´ ë“œì‹¤í…ë°

ì œê°€ PPTë¡œ ë„ì‹í™” í•´ë³¼ê²Œìš©

```mermaid
sequenceDiagram
    actor A as Client 
    participant B as Controller
    participant C as RequestDto
    participant D as CategoriesExistValidator
    participant E as Validator
    participant F as ExceptionAdvice
    A->>B: Request
    B->>C: RequestDto
    C->>+D: @ExistCategories
    alt has categories
      D-->>-C: Response
    else
      D->>E: Exception
      E->>+F: Exception
      F-->>-C: Response
    end
    C-->>A: Response
```

```mermaid
flowchart RL
    A[Client] -- Request --> B[Controller]
    B --> ValidationCheck --> B
    subgraph ValidationCheck
        direction TB
        X[RequestDto] --> C[@ExistCategories]
        C -- isValid --> Exception -->D[CategoriesExistValidator]
        subgraph Exception
            direction TB
            D -- ConstraintViolationException --> E[@Valid]
            E -- MethodArgumentNotValidException --> F[advice]
        end
    end
    B -- Response --> A
```

1. Controllerì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ë„˜ê²¨ì¤€ HTTP RequestBodyì˜ ë°ì´í„°ë¥¼ DTOë¡œ ë³€í™˜í•¨
2. ê·¸ ê³¼ì •ì—ì„œ @ExistCategoriesê°€ ë™ì‘
3. Validatorì—ì„œ isValidì˜ false ê°’ì„ í™•ì¸í•˜ê³  `ConstraintViolationException` ë¥¼ ë°œìƒ
4. @Validê°€ ìˆìœ¼ë¯€ë¡œ `ConstraintViolationException` ê°€ ê³§ë°”ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
5. @Validì…ì¥ì—ì„œ ì—­ì‹œë‚˜ ê²€ì¦ì´ ì‹¤íŒ¨ í•œ ê²ƒì„ ê°ì§€í•˜ì—¬ `MethodArgumentNotValidException` ìƒì„±
6. ìµœì¢…ì ìœ¼ë¡œ ExceptionAdviceê°€ ê°ì§€ í›„ ì‘ë‹µ ìƒì„±

![Untitled](Untitled%2034.png)

ì´ë ‡ê²Œ Request Bodyê°€ ì•„ë‹Œ PathVariable ë“± ë‹¤ë¥¸ ê°’ì— ëŒ€í•´ì„œë„ ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì¼ ìˆ˜ ìˆëŠ”ë°,

ì´ ê²½ìš°ëŠ” @Validë¥¼ ê±°ì¹˜ì§€ ì•Šê¸°ì— ê³§ë°”ë¡œ `ConstraintViolationException` ê°€ ì „ë‹¬ì´ ë©ë‹ˆë‹¤.

(ë‹¨, ì´ë•ŒëŠ” Controllerì— @Validatedë¥¼ ë„£ì–´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤!)

ì´ë¥¼ ì´ìš©í•´ì„œ Path variableê³¼ Query Stringì˜ ê°’ë„ ê²€ì¦ì´ ê°€ëŠ¥í•˜ë©°

**ì´ë²ˆ ì£¼ ë¯¸ì…˜ì—ì„œ ë„ì „ì„ í•˜ì…”ì•¼ í•©ë‹ˆë‹¤!**

ì§„ì§œ ë§ˆì§€ë§‰ìœ¼ë¡œ (ì°ë§‰!)

```java
public class MemberRequestDTO {

    @Getter
    public static class JoinDto{
        @NotBlank
        String name;
        @NotNull
        Integer gender;
        @NotNull
        Integer birthYear;
        @NotNull
        Integer birthMonth;
        @NotNull
        Integer birthDay;
        @Size(min = 5, max = 12)
        String address;
        @Size(min = 5, max = 12)
        String specAddress;
        @ExistCategories
        List<Long> preferCategory;
    }
}
```

RequestDTOì—ì„œ ë‚˜ë¨¸ì§€ í•„ë“œì— ëŒ€í•œ ê²€ì¦ ì¡°ê±´ë„ ë¶™ì—¬ë´…ì‹œë‹¤.

@NotBlank, @NotNull ë“±ë“± ì´ëŸ° ì–´ë…¸í…Œì´ì…˜ì€ javaì—ì„œ ì œê³µí•˜ëŠ” ê²€ì¦ì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ì´ë©°

@ExistCategoriesì²˜ëŸ¼ ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ê³¼ ê°™ì´ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!

ìŠ¤ì›¨ê±°ì—ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤!

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-09-27 á„‹á…©á„’á…® 5.16.02.png](%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-09-27_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.16.02.png)

### í—ˆë‚˜ ì•„ì§ Validatorì— ìˆ˜ì •ì„ í•˜ë©´ ì¢‹ì€ ë¶€ë¶„ì´ ì¡´ì¬í•˜ë©° ì´ë¥¼ ê³ ì¹˜ëŠ” ê²ƒì„ ë¯¸ì…˜ì— í¬í•¨ì„ ì‹œí‚¤ê² ìŠµë‹ˆë‹¤ ğŸ™‚

**(íŒíŠ¸, repositoryì— ì ‘ê·¼í•˜ëŠ” ê³„ì¸µì€ ë¬´ì¡°ê±´ service í•˜ë‚˜ë§Œ ìˆì–´ì•¼ í•¨)**

ë¯¸ì…˜ ìˆ˜í–‰ ì‹œ ì´ ë¶€ë¶„ì„ ì˜¬ë°”ë¥´ê²Œ ê³ ì³ì„œ ì§„í–‰í•´ë³´ì„¸ìš”!

```java
@Component
@RequiredArgsConstructor
public class CategoriesExistValidator implements ConstraintValidator<ExistCategories, List<Long>> {

    private final FoodCategoryRepository foodCategoryRepository;

    @Override
    public void initialize(ExistCategories constraintAnnotation) {
        ConstraintValidator.super.initialize(constraintAnnotation);
    }

    @Override
    public boolean isValid(List<Long> values, ConstraintValidatorContext context) {
        boolean isValid = values.stream()
                .allMatch(value -> foodCategoryRepository.existsById(value));

        if (!isValid) {
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate(ErrorStatus.FOOD_CATEGORY_NOT_FOUND.toString()).addConstraintViolation();
        }

        return isValid;

    }
}
```

# ğŸ¯í•µì‹¬ í‚¤ì›Œë“œ

---

<aside>
ğŸ’¡ ì£¼ìš” ë‚´ìš©ë“¤ì— ëŒ€í•´ ì¡°ì‚¬í•´ë³´ê³ , ìì‹ ë§Œì˜ ìƒê°ì„ í†µí•´ ì •ë¦¬í•´ë³´ì„¸ìš”!
ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¸ê³ í•˜ì—¬ ì •ì˜, ì†ì„±, ì¥ë‹¨ì  ë“±ì„ ì ì–´ì£¼ì…”ë„ ë©ë‹ˆë‹¤.
ì¡°ì‚¬ëŠ” ê³µì‹ í™ˆí˜ì´ì§€ **Best**, ë¸”ë¡œê·¸(ìµœì‹  ë‚ ì§œ) **Not Bad**

</aside>

- javaì˜ Exception ì¢…ë¥˜ë“¤
    
    ### **1.Â Exceptionì˜ ì •ì˜**
    
    Javaì—ì„œ Exception(ì˜ˆì™¸)ì€ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, í”„ë¡œê·¸ë¨ íë¦„ì„ ì œì–´í•˜ê±°ë‚˜ ì¤‘ë‹¨í•˜ì§€ ì•Šê³  ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•¨.
    
    ### **2.Â Exceptionì˜ ì¢…ë¥˜**
    
    1. **Checked Exception (ì²´í¬ ì˜ˆì™¸)**
        - **ì»´íŒŒì¼ ì‹œì **ì— ë°˜ë“œì‹œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ì˜ˆì™¸.
        - **`try-catch`**ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ ë©”ì„œë“œì—Â **`throws`**Â ì„ ì–¸ì„ í•´ì•¼ í•¨.
        - **ì£¼ìš” ì˜ˆ:**
            - **`IOException`**: íŒŒì¼ ì…ì¶œë ¥ ê´€ë ¨ ì˜¤ë¥˜
            - **`SQLException`**: ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ì¤‘ ì˜¤ë¥˜
            - **`ClassNotFoundException`**: í´ë˜ìŠ¤ ë¡œë“œ ì‹¤íŒ¨
    2. **Unchecked Exception (ì–¸ì²´í¬ ì˜ˆì™¸)**
        - **ëŸ°íƒ€ì„ ì‹œì **ì— ë°œìƒí•˜ë©°, ë°˜ë“œì‹œ ì²˜ë¦¬í•  í•„ìš”ëŠ” ì—†ìŒ.
        - ê°œë°œìê°€ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë†“ì¹  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜ í•„ìš”.
        - **ì£¼ìš” ì˜ˆ:**
            - **`NullPointerException`**: ê°ì²´ê°€Â **`null`**ì¼ ë•Œ ì ‘ê·¼ ì‹œ ë°œìƒ
            - **`ArrayIndexOutOfBoundsException`**: ë°°ì—´ ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆì„ ë•Œ
            - **`ArithmeticException`**: ìˆ˜í•™ì  ê³„ì‚° ì˜¤ë¥˜ (ì˜ˆ: 0ìœ¼ë¡œ ë‚˜ëˆŒ ë•Œ)
    3. **Error (ì˜¤ë¥˜)**
        - ì‹œìŠ¤í…œ ë ˆë²¨ì˜ ì‹¬ê°í•œ ë¬¸ì œë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥.
        - JVM ê´€ë ¨ ë¬¸ì œë¡œ ì¸í•´ ë°œìƒ.
        - **ì£¼ìš” ì˜ˆ:**
            - **`OutOfMemoryError`**: ë©”ëª¨ë¦¬ ë¶€ì¡±
            - **`StackOverflowError`**: ë¬´í•œ ì¬ê·€ í˜¸ì¶œ
            - **`LinkageError`**: í´ë˜ìŠ¤ ë¡œë“œ ì‹œ ì¶©ëŒ
    
    ### **3.Â ì¥ë‹¨ì **
    
    - **ì¥ì :**
        - ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í†µí•´ í”„ë¡œê·¸ë¨ì´ ë¹„ì •ìƒ ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ ë°©ì§€.
        - ì˜¤ë¥˜ ìƒí™©ì„ ëª…í™•íˆ ì •ì˜í•˜ê³  ì²˜ë¦¬ ê°€ëŠ¥.
    - **ë‹¨ì :**
        - ê³¼ë„í•œ ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ì½”ë“œ ë³µì¡ë„ë¥¼ ì¦ê°€ì‹œí‚´.
        - ì„±ëŠ¥ ì €í•˜ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŒ (ì˜ˆì™¸ ë°œìƒ ì‹œ ìŠ¤íƒ ì¶”ì  ë¹„ìš©).
- @Valid
    
    ### **1.Â @Validì˜ ì •ì˜**
    
    - **`@Valid`**ëŠ”Â **Java Bean Validation**Â í‘œì¤€ API(JSR 380)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œÂ **ìœ íš¨ì„± ê²€ì¦ ì–´ë…¸í…Œì´ì…˜**
    - ì£¼ë¡œÂ **Spring MVC**ì—ì„œ ìš”ì²­ ë°ì´í„° ìœ íš¨ì„±ì„ ê²€ì¦í•  ë•Œ ì‚¬ìš©.
    
    ### **2.Â ì‚¬ìš© ë°©ë²•**
    
    1. **DTO í´ë˜ìŠ¤**ì—ì„œ ìœ íš¨ì„± ì¡°ê±´ ì„¤ì •:
        - **`javax.validation.constraints`**ì—ì„œ ì œê³µí•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ í™œìš©.
            
            ```java
            public class UserRequest {
                @NotBlank
                private String name;
            
                @Email
                private String email;
            
                @Min(18)
                private int age;
            }
            
            ```
            
    2. **Controllerì—ì„œ ìœ íš¨ì„± ê²€ì¦**:
        - **`@Valid`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ê°ì²´ë¥¼ ê²€ì¦.
            
            ```java
            @RestController
            public class UserController {
                @PostMapping("/users")
                public ResponseEntity<String> createUser(@Valid @RequestBody UserRequest request) {
                    return ResponseEntity.ok("User created!");
                }
            }
            
            ```
            
    3. **Validation ì˜ˆì™¸ ì²˜ë¦¬**:
        - ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ ì‹œÂ **`MethodArgumentNotValidException`**ì´ ë°œìƒ.
        - **`@RestControllerAdvice`**ë¥¼ í™œìš©í•´ ì˜ˆì™¸ ì²˜ë¦¬.
            
            ```java
            @RestControllerAdvice
            public class GlobalExceptionHandler {
            
                @ExceptionHandler(MethodArgumentNotValidException.class)
                public ResponseEntity<String> handleValidationExceptions(MethodArgumentNotValidException ex) {
                    return ResponseEntity.badRequest().body("Validation error");
                }
            }
            
            ```
            
    
    ### **3.Â ì¥ë‹¨ì **
    
    - **ì¥ì :**
        - ê°„ê²°í•˜ê³  ì„ ì–¸ì ì¸ ë°©ì‹ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì¦ ì²˜ë¦¬.
        - Springê³¼ì˜ ë†’ì€ í†µí•©ì„±.
    - **ë‹¨ì :**
        - ì»¤ìŠ¤í…€ ê²€ì¦ ë¡œì§ì´ í•„ìš”í•œ ê²½ìš° ì¶”ê°€ì ì¸ ì‘ì—… í•„ìš”.
        - í•™ìŠµ ê³¡ì„ ì´ ìˆì„ ìˆ˜ ìˆìŒ.

# ğŸ“¢Â í•™ìŠµ í›„ê¸°

---

- ì´ë²ˆ ì£¼ì°¨ ì›Œí¬ë¶ì„ í•´ê²°í•´ë³´ë©´ì„œ ì–´ë• ëŠ”ì§€ íšŒê³ í•´ë´…ì‹œë‹¤.
- í•µì‹¬ í‚¤ì›Œë“œì— ëŒ€í•´ ì™„ë²½í•˜ê²Œ ì´í•´í–ˆëŠ”ì§€? í˜¹ì‹œ ì´í•´ê°€ ì•ˆ ë˜ëŠ” ë¶€ë¶„ì€ ë­ì˜€ëŠ”ì§€?

<aside>
ğŸ’¡

</aside>

# âš ï¸Â ìŠ¤í„°ë”” ì§„í–‰ ë°©ë²•

---

1. ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ê¸° ì „, ì›Œí¬ë¶ ë‚´ìš©ë“¤ì„ ëª¨ë‘ ì±„ìš°ê³  ìŠ¤í„°ë””ì—ì„œëŠ” ì„œë¡œ ëª¨ë¥´ëŠ” ë‚´ìš©ë“¤ì„ ê³µìœ í•´ì£¼ì„¸ìš”.
2. ë¯¸ì…˜ì€ ì›Œí¬ë¶ ë‚´ìš©ë“¤ì„ ëª¨ë‘ ì™„ë£Œí•˜ê³  ë‚˜ì„œ ìŠ¤í„°ë”” ì „/í›„ë¡œ ì§„í–‰í•´ë³´ì„¸ìš”.
3. ë‹¤ìŒì£¼ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ê¸° ì „, ì§€ë‚œì£¼ ë¯¸ì…˜ì„ ì„œë¡œ ê³µìœ í•´ì„œ ìƒí˜¸ í”¼ë“œë°±ì„ ì§„í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

# ğŸ”¥Â ë¯¸ì…˜

---

### [UMC ì„œë²„ ì›Œí¬ë¶ ì°¸ê³  ìë£Œ](https://github.com/CYY1007/UMC_SERVER_WORKBOOK.git)

[GitHub - chock-cho/UMC-7th-spring-workbook at feature-week8-workbook](https://github.com/chock-cho/UMC-7th-spring-workbook/tree/feature-week8-workbook)

---

3ì£¼ì°¨ì— ì„¤ê³„í•œ URL(ì—†ìœ¼ë©´ ì¶”ê°€!)ì„ ë°”íƒ•ìœ¼ë¡œ ì•„ë˜ì˜ API êµ¬í˜„

ë‹¨, ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ì—†ëŠ” ê´€ê³„ë¡œ ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ë¯¸ì…˜ ë„ì „í•˜ëŠ” ìœ ì €ëŠ”

**í•˜ë“œ ì½”ë”©(ê·¸ëƒ¥ ë¬´ì¡°ê±´ ë””ë¹„ì— ìˆëŠ” ì•„ë¬´ë‚˜ í•œëª…)**ìœ¼ë¡œ í•˜ê¸°!

1. íŠ¹ì • ì§€ì—­ì— ê°€ê²Œ ì¶”ê°€í•˜ê¸° API
2. **ê°€ê²Œì— ë¦¬ë·° ì¶”ê°€í•˜ê¸° API**
3. ê°€ê²Œì— ë¯¸ì…˜ ì¶”ê°€í•˜ê¸° API
4. **ê°€ê²Œì˜ ë¯¸ì…˜ì„ ë„ì „ ì¤‘ì¸ ë¯¸ì…˜ì— ì¶”ê°€(ë¯¸ì…˜ ë„ì „í•˜ê¸°) API**

3ì£¼ì°¨ì— ì„¤ê³„í•˜ì§€ ì•Šì€ API URLì˜ ê²½ìš°ëŠ” ì„¤ê³„ë¥¼ ë³µìŠµ í•  ê²¸ í•´ë³´ê³  ì§„í–‰í•´ì£¼ì„¸ìš”!

ë°˜ë“œì‹œ ì¸ì¦ ì‚¬ì§„ì„ ì¤‘ê°„ ì¤‘ê°„ ë‚¨ê¸°ë©°, 7ì£¼ì°¨ì™€ ë™ì¼í•˜ê²Œ githubì— ë¸Œëœì¹˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ í‘¸ì‹œí•˜ê¸°

<aside>
ğŸ“Œ **ì¡°ê±´**

1. github branchë¥¼ ë§Œë“¤ ë•Œ issueë¥¼ ë§Œë“¤ê³  branch ìƒì„±í•˜ì—¬ ì§„í–‰ í›„ pushí•  ê²ƒ
2. controller, service, converter, dto, repositoryë¥¼ ëª¨ë‘ í™œìš©í•  ê²ƒ
3. ExceptionAdviceë¥¼ ì ê·¹ í™œìš©í•´ì•¼í•˜ë©° RequestBodyì— ê°’ì´ ëˆ„ë½ë˜ê±°ë‚˜ ê°’ì´ ì˜ëª»ëœ ê²ƒì„ @Valid ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê²€ì¦í•˜ê¸°
4. **4ë²ˆ APIì˜ ê²½ìš°ëŠ” ë„ì „ í•˜ë ¤ëŠ” ë¯¸ì…˜ì´ ì´ë¯¸ ë„ì „ ì¤‘ì¸ì§€ë¥¼ ê²€ì¦í•´ì•¼ í•˜ë©° ì´ë¥¼ ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ê²€ì¦ì„ í•´ì•¼ í•¨.**
5. **2ë²ˆ APIì˜ ê²½ìš°ë„ 4ë²ˆ APIì²˜ëŸ¼ ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ë ¤ëŠ” ê°€ê²Œê°€ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ê²ƒ.**
</aside>

1, 2, 3 ë²ˆ ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ì•Šì„ ê²½ìš° í•´ë‹¹ APIëŠ” ë¯¸ì…˜ ì™„ë£Œ ëŒ€ìƒì—ì„œ ì œì™¸ê°€ ë˜ë©°

**2, 4ë²ˆ APIëŠ” í•„ìˆ˜ë¡œ êµ¬í˜„í•´ì•¼ í•˜ê³ ,**

ë§Œì•½ 3ë²ˆ APIë¥¼ ë§Œë“¤ì§€ ì•Šì„ ê²½ìš° 2,4ë²ˆ API ë§Œë“¤ ë•Œ DBì— ìˆ˜ë™ìœ¼ë¡œ ë¯¸ì…˜ ì •ë³´ ê¸°ì…í•´ì„œ ì§„í–‰

ìœ„ì˜ 4ê°œ APIì¤‘ **í•„ìˆ˜ API í¬í•¨ 3ê°œ ë¯¸ë§Œìœ¼ë¡œ ì™„ë£Œ ì‹œ ì› ì•„ì›ƒ ë¶€ì—¬**

# ğŸ’ªÂ ë¯¸ì…˜ ê¸°ë¡

---

<aside>
ğŸ€ ë¯¸ì…˜ ê¸°ë¡ì˜ ê²½ìš°, ì•„ë˜ ë¯¸ì…˜ ê¸°ë¡ í† ê¸€ ì†ì— ì‘ì„±í•˜ì‹œê±°ë‚˜, í˜ì´ì§€ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬ í•´ë‹¹ í˜ì´ì§€ì— ê¸°ë¡í•˜ì—¬ë„ ì¢‹ìŠµë‹ˆë‹¤!

í•˜ì§€ë§Œ, ê²°ê³¼ë¬¼ë§Œ ì˜¬ë¦¬ëŠ” ê²ƒì´ ì•„ë‹Œ, **ì¤‘ê°„ ê³¼ì • ëª¨ë‘ ê¸°ë¡í•˜ì…”ì•¼ í•œë‹¤ëŠ” ì !** ìŠì§€ ë§ì•„ì£¼ì„¸ìš”.

</aside>

- **ë¯¸ì…˜ ê¸°ë¡**
    
    
    1. íŠ¹ì • ì§€ì—­ì— ê°€ê²Œ ì¶”ê°€í•˜ê¸° API
    2. **ê°€ê²Œì— ë¦¬ë·° ì¶”ê°€í•˜ê¸° API**
    3. ê°€ê²Œì— ë¯¸ì…˜ ì¶”ê°€í•˜ê¸° API
    4. **ê°€ê²Œì˜ ë¯¸ì…˜ì„ ë„ì „ ì¤‘ì¸ ë¯¸ì…˜ì— ì¶”ê°€(ë¯¸ì…˜ ë„ì „í•˜ê¸°) API**
    
    [íŠ¹ì • ì§€ì—­ì— ê°€ê²Œ ì¶”ê°€í•˜ê¸° API](https://www.notion.so/API-3fc30fc1d12f4974a95d52f16fb659a6?pvs=21)
    
    [ê°€ê²Œì— ë¦¬ë·° ì¶”ê°€í•˜ê¸° API](https://www.notion.so/API-a9f1e0ad9d9a43df81e0277c25d0060c?pvs=21)
    
    [ê°€ê²Œì— ë¯¸ì…˜ ì¶”ê°€í•˜ê¸° API](https://www.notion.so/API-abfb02abdcfa4f54b47ffc36cd581dcc?pvs=21)
    
    [**ê°€ê²Œì˜ ë¯¸ì…˜ì„ ë„ì „ ì¤‘ì¸ ë¯¸ì…˜ì— ì¶”ê°€(ë¯¸ì…˜ ë„ì „í•˜ê¸°) API**](https://www.notion.so/API-60fa864ebf1e44568d051bcaaccc48a0?pvs=21)
    
    [ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜](https://www.notion.so/13901a032d6f4d5187aa0572878f6846?pvs=21)
    

> **github ë§í¬**
> 
> 
> 

# âš¡ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

---

<aside>
ğŸ’¡ ì‹¤ìŠµí•˜ë©´ì„œ ìƒê¸´ ë¬¸ì œë“¤ì— ëŒ€í•´ì„œ, **ì´ìŠˆ - ë¬¸ì œ - í•´ê²°** ìˆœì„œë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

</aside>

<aside>
ğŸ’¡ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ê¸° ì–´ë µë‹¤ë©´? ìŠ¤í„°ë””ì›ë“¤ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ê±°ë‚˜ **ë„ˆë””ë„ˆë¦¬ì˜ ì§€ì‹IN ì±„ë„ì— ì§ˆë¬¸**í•´ë³´ì„¸ìš”!

</aside>

- âš¡ì´ìŠˆ ì‘ì„± ì˜ˆì‹œ (ì´ìŠˆê°€ ìƒê¸°ë©´ ì•„ë˜ë¥¼ ë³µì‚¬í•´ì„œ No.1, No.2, No3 â€¦ ìœ¼ë¡œ ì‘ì„±í•´ì„œ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ê¼­ í•´ë³´ì„¸ìš”!)
    
    **`ì´ìŠˆ`**
    
    ğŸ‘‰ ì•± ì‹¤í–‰ ì¤‘ì— ë…¸ë˜ ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë‹ˆê¹Œ ì•±ì´ ì¢…ë£Œë˜ì—ˆë‹¤.
    
    **`ë¬¸ì œ`**
    
    ğŸ‘‰ ë…¸ë˜í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¦¬ìŠ¤íŠ¸ì˜ Sizeë¥¼ ë„˜ì–´ì„œ NullPointExceptionì´ ë°œìƒí•˜ì—¬ ì•±ì´ ì¢…ë£Œëœ ê²ƒì´ì—ˆë‹¤. 
    
    **`í•´ê²°`**
    
    ğŸ‘‰  ë…¸ë˜ ë‹¤ìŒ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë°ì´í„°ë¦¬ìŠ¤íŠ¸ì˜ Sizeë¥¼ ê²€ì‚¬í•´ Sizeë³´ë‹¤ ë„˜ì–´ê°€ë ¤ê³  í•˜ë©´ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šê³ , ì²« ë…¸ë˜ë¡œ ëŒì•„ê°€ê²Œë” í•´ê²°
    
    **`ì°¸ê³ ë ˆí¼ëŸ°ìŠ¤`**
    
    - ë§í¬
- âš¡ì´ìŠˆ No.1
    
    **`ì´ìŠˆ`**
    
    ğŸ‘‰ [íŠ¸ëŸ¬ë¸”ì´ ìƒê¸´ ìƒíƒœ ì‘ì„±]
    
    **`ë¬¸ì œ`**
    
    ğŸ‘‰ [ì–´ë–¤ ì´ìœ ë¡œ í•´ë‹¹ ì´ìŠˆê°€ ì¼ì–´ë‚¬ëŠ”ì§€ ì‘ì„±]
    
    **`í•´ê²°`**
    
    ğŸ‘‰  [í•´ê²° ë°©ë²• ì‘ì„±]
    
    **`ì°¸ê³ ë ˆí¼ëŸ°ìŠ¤`**
    
    - [ë¬¸ì œ í•´ê²° ì‹œ ì°¸ê³ í•œ ë§í¬]

---

Copyright Â© 2023 ìµœìš©ìš±(ë˜˜ì´) All rights reserved.

Copyright Â© 2024 ê¹€ì¤€í™˜(ì œì´ë¯¸) All rights reserved.